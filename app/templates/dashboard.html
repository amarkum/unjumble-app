{% extends 'layout.html' %}
{% block content %}
<div class="container mx-auto p-4">
    <h2 class="text-2xl font-bold mb-4">Dashboard</h2>
    <p>Logged in as {{ username }}</p>
    <a href="{{ url_for('logout') }}" class="text-blue-500 hover:text-blue-700">Logout</a>
    <a href="{{ url_for('upload_file') }}" class="ml-4 text-blue-500 hover:text-blue-700">Upload New File</a>

    <div class="grid grid-cols-4 gap-4 mt-4">
        {% for file in user_files %}
            <div class="border rounded overflow-hidden text-center">
                <div class="relative w-full h-32 bg-gray-100">
                    {% if file.file_name.endswith(('.png', '.jpg', '.jpeg', '.gif')) %}
                        <img src="{{ url_for('uploaded_file', username=user.username, filename=file.file_name) }}" alt="{{ file.file_name }}" class="absolute inset-0 w-full h-full object-cover">
                    {% elif file.file_name.endswith('.pdf') %}
                        <img src="{{ url_for('static', filename='icons/pdf-icon.png') }}" alt="PDF" class="absolute inset-0 w-full h-full object-cover">
                    {% else %}
                        <img src="{{ url_for('static', filename='icons/default-icon.png') }}" alt="File" class="absolute inset-0 w-full h-full object-cover">
                    {% endif %}
                </div>
                <p class="p-2 bg-white">{{ file.file_name }}</p>
                <a href="{{ url_for('delete_file', file_id=file.file_id) }}" class="text-red-500 hover:text-red-700 text-sm p-1 bg-opacity-75 bg-gray-100 hover:bg-gray-200">Delete</a>
            </div>
        {% else %}
            <p>No files uploaded.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
